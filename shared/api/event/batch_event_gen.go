// Code generated by generate-event; DO NOT EDIT.

package event

import (
	"encoding/json"
	"fmt"
	"net/http"

	"github.com/FuturFusion/migration-manager/internal/server/request"
	"github.com/FuturFusion/migration-manager/shared/api"
)

const (
	BatchStarted  api.LifecycleAction = "batch-started"
	BatchStopped  api.LifecycleAction = "batch-stopped"
	BatchReset    api.LifecycleAction = "batch-reset"
	BatchCreated  api.LifecycleAction = "batch-created"
	BatchModified api.LifecycleAction = "batch-modified"
	BatchRemoved  api.LifecycleAction = "batch-removed"
)

func BatchURI(id string) string {
	uri := fmt.Sprintf("/1.0/batches/%s", id)

	return uri
}

func NewBatchEvent(action api.LifecycleAction, r *http.Request, entity api.Batch, id string) api.EventLifecycle {
	b, _ := json.Marshal(entity)

	return api.EventLifecycle{
		Action:    string(action),
		Requestor: request.CreateRequestor(r),
		Entities:  []string{BatchURI(id)},
		Metadata:  b,
	}
}
